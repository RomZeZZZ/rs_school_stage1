!function(){"use strict";var t={659:function(t,n,e){t.exports=e.p+"img/finish.png"}},n={};function e(a){var r=n[a];if(void 0!==r)return r.exports;var i=n[a]={exports:{}};return t[a](i,i.exports,e),i.exports}e.p="/",function(){const t=[{path:"^/$",data:'\n    <header class="header"> \n        <div class="header_container">\n            <h1 class="header_container_logo">\n                <a href="/">Async Race</a>\n            </h1>\n        </div>\n    </header>\n    <main class="main">\n        <div class="main_container">\n            <div class="main_container_buttons-container">\n                    <button class="main_container_buttons-container_togarage">\n                        <a href="/garage">TO GARAGE</a>\n                    </button>\n                    <button class="main_container_buttons-container_towinners">\n                        <a href="/winners">TO WINNERS</a>\n                    </button>\n            </div>\n        </div>\n    </main>\n    <footer class="footer">\n        <div class="footer_container">\n            <a class="footer_container_rs-school" href="https://rs.school/js/"></a>\n            <div class="footer_container_year">\n                2023\n            </div>\n            <a class="footer_container_git-hub" href="https://github.com/RomZeZZZ"></a>\n        </div>\n    </footer>\n'},{path:"^/garage$",data:'\n    <header class="header"> \n        <div class="header_container">\n            <h1 class="header_container_logo">\n                <a href="/">Async Race</a>\n            </h1>\n        </div>\n    </header>\n    <main class="main">\n        <div class="main_container-garage">\n            <div class="main_container-garage_nav">\n                <button class="main_container-garage_nav_togarage">\n                    <a href="/garage">TO GARAGE</a>\n                </button>\n                <button class="main_container-garage_nav_towinners">\n                    <a href="/winners">TO WINNERS</a>\n                </button>\n            </div>\n            <div class="main_container-garage_create">\n                <input type="text" class="main_container-garage_create_input-text">\n                <input type="color" class="main_container-garage_create_input-color">\n                <button class="main_container-garage_create_button-create">CREATE</button>\n            </div>\n            <div class="main_container-garage_update">\n                <input type="text" class="main_container-garage_update_input-text">\n                <input type="color" class="main_container-garage_update_input-color">\n                <button id="update" class="main_container-garage_update_button-update">UPDATE</button>\n            </div>\n            <div class="main_container-garage_control">\n                <button class="main_container-garage_race-button">RACE</button>\n                <button class="main_container-garage_reset-button">RESET</button>\n                <button class="main_container-garage_generate-button">GENERATE</button>\n            </div>\n            <div class="main_container-garage_winners-count">Garage()</div>\n            <div class="main_container-garage_winners-page-number">Page#</div>\n            <div class="main_container-garage_track">\n\n            </div>\n            <div class="main_container-garage_input">\n                Winners per page: <input id="cars_per_page" type="number" min="1" max="10" placeholder="" \n                class="main_container-garage_input_winners-per-page">\n            </div>\n            <div class="main_container-garage_nav-pagination">\n                <button class="main_container-garage_nav-pagination_prev">PREV</button>\n                <button class="main_container-garage_nav-pagination_next">NEXT</button>\n            </div>\n        </div>\n    </main>\n    <footer class="footer">\n    <div class="footer_container">\n        <a class="footer_container_rs-school" href="https://rs.school/js/"></a>\n        <div class="footer_container_year">\n            2023\n        </div>\n        <a class="footer_container_git-hub" href="https://github.com/RomZeZZZ"></a>\n    </div>\n    </footer>\n'},{path:"^/winners$",data:'\n    <header class="header"> \n        <div class="header_container">\n            <h1 class="header_container_logo">\n                <a href="/">Async Race</a>\n            </h1>\n        </div>\n    </header>\n    <main class="main">\n        <div class="main_container-garage">\n            <div class="main_container-garage_nav">\n                <button class="main_container-garage_nav_togarage">\n                    <a href="/garage">TO GARAGE</a>\n                </button>\n                <button class="main_container-garage_nav_towinners">\n                    <a href="/winners">TO WINNERS</a>\n                </button>\n            </div>\n            <div class="main_container-garage_winners-count">Winners()</div>\n            <div class="main_container-garage_winners-page-number">Page#</div>\n            <table class="main_container-garage_table">\n                <thead>\n                    <tr class="main_container-garage_table_tr">\n                        <th class="main_container-garage_table_tr_th">â„–</th>\n                        <th class="main_container-garage_table_tr_th">Car</th>\n                        <th class="main_container-garage_table_tr_th">Name</th>\n                        <th data-wins=true class="main_container-garage_table_tr_th">Wins</th>\n                        <th data-time=true class="main_container-garage_table_tr_th">Best Time</th>\n                    </tr>\n                </thead>\n                <tbody class="tbody">\n                </tbody>\n            </table>\n            <div class="main_container-garage_input">\n                Winners per page: <input type="number" min="1" max="10" placeholder="sad" \n                class="main_container-garage_input_winners-per-page">\n            </div>\n            <div class="main_container-garage_nav-pagination">\n                <button class="main_container-garage_nav-pagination_prev">PREV</button>\n                <button class="main_container-garage_nav-pagination_next">NEXT</button>\n            </div>\n        </div>\n    </main>\n    <footer class="footer">\n        <div class="footer_container">\n            <a class="footer_container_rs-school" href="https://rs.school/js/"></a>\n        <div class="footer_container_year">\n            2023\n        </div>\n            <a class="footer_container_git-hub" href="https://github.com/RomZeZZZ"></a>\n        </div>\n    </footer>\n'}],n="http://127.0.0.1:3000/winners",a="http://127.0.0.1:3000/garage",r="http://127.0.0.1:3000/engine",i=["BMW","TAYOTA","Opel","Mercedes","Chevrolet","Audi","Ford","Hyundai","Kia","Honda","Nissan","Peugeot","Suzuki"],o=["Explorer","Fiesta","Focus","Mondeo","X1","X5","Q5","Crossland","Zafira Life","CAMRY","YARIS","RAV4"];var s=function(t,n,e,a){return new(e||(e=Promise))((function(r,i){function o(t){try{c(a.next(t))}catch(t){i(t)}}function s(t){try{c(a.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(o,s)}c((a=a.apply(t,n||[])).next())}))};const c=(t,n)=>s(void 0,void 0,void 0,(function*(){const e=yield fetch(`${a}/?_page=${t}&_limit=${n}`,{method:"GET"});if(e.ok)return{headers:e.headers,data:yield e.json()};throw new Error(`HTTP error! status: ${e.status}`)})),d=t=>s(void 0,void 0,void 0,(function*(){return yield fetch(`${a}/${t}`,{method:"GET"}).then((t=>{if(t.ok)return t.json();throw new Error(`HTTP error! status: ${t.status}`)})).catch((t=>{console.log(t)}))})),l=t=>s(void 0,void 0,void 0,(function*(){const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return yield fetch(`${a}`,n).then((t=>{if(t.ok)return t.json();throw new Error(`HTTP error! status: ${t.status}`)})).catch((()=>{console.log("car not found")}))})),u={winnersPage:1,carsPage:1,limitWinners:2,limitCars:4,allWinnersCount:0,allCarsCount:0,sortWinners:"wins",orderWinners:"DESC",selectButtonIsActive:!1,selectedCarId:5,inputCreate:"",inputUpdate:""},g={};const _=()=>{return t=void 0,e=void 0,r=function*(){const t=yield(e=u.winnersPage,a=u.limitWinners,r=u.sortWinners,i=u.orderWinners,s(void 0,void 0,void 0,(function*(){const t=yield fetch(`${n}/?_page=${e}&_limit=${a}&_sort=${r}&_order=${i}`,{method:"GET"});if(t.ok)return{headers:t.headers,data:yield t.json()};throw new Error(`HTTP error! status: ${t.status}`)})));var e,a,r,i;const o=document.querySelector(".tbody"),c=document.querySelector(".main_container-garage_winners-count"),l=document.querySelector(".main_container-garage_winners-page-number"),g=document.querySelector('[data-wins="true"]'),_=document.querySelector('[data-time="true"]');"wins"===u.sortWinners?"ASC"===u.orderWinners?null==g||g.classList.add("sorted-ASC"):null==g||g.classList.add("sorted-DESC"):"ASC"===u.orderWinners?null==_||_.classList.add("sorted-ASC"):null==_||_.classList.add("sorted-DESC");const h=t.headers,m=h?h.get("X-Total-Count"):null;u.allWinnersCount=null===m?0:+m,c&&l&&(c.innerHTML=`Winners(${m})`,l.innerHTML=`Page#${u.winnersPage}`);let v="",p=(u.winnersPage-1)*u.limitWinners;for(const n of t.data){const t=yield d(n.id);p++,v+=`\n          <tr class="main_container-garage_table_tr">\n            <th class="main_container-garage_table_tr_td">${p}</td>\n            <th class="main_container-garage_table_tr_td">${t.color}</td>\n            <th class="main_container-garage_table_tr_td">${t.name}</td>\n            <th class="main_container-garage_table_tr_td">${n.wins}</td>\n            <th class="main_container-garage_table_tr_td">${n.time}</td>\n          </tr>\n        `}o&&(o.innerHTML=v)},new((a=void 0)||(a=Promise))((function(n,i){function o(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(o,s)}c((r=r.apply(t,e||[])).next())}));var t,e,a,r};var h=function(t,n,e,a){return new(e||(e=Promise))((function(r,i){function o(t){try{c(a.next(t))}catch(t){i(t)}}function s(t){try{c(a.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(o,s)}c((a=a.apply(t,n||[])).next())}))};const m=()=>h(void 0,void 0,void 0,(function*(){const t=document.querySelector(".main_container-garage_track"),n=document.querySelectorAll(".main_container-garage_track_car-container"),e=document.querySelector(".main_container-garage_create_input-text"),a=document.querySelector(".main_container-garage_create_input-color"),r=document.querySelector(".main_container-garage_winners-count");if(""===e.value)e.classList.add("error"),setTimeout((()=>{e.classList.remove("error")}),1e3);else{const i={color:a.value,name:e.value},o=yield l(i);n&&n.length<u.limitCars&&(t.innerHTML+=p(o.id,o.name,o.color)),u.allCarsCount=u.allCarsCount+1,r.textContent=`Garage(${u.allCarsCount})`,u.inputCreate="",e.value=""}})),v=()=>h(void 0,void 0,void 0,(function*(){const t=document.querySelector(".main_container-garage_update_input-text"),n=document.querySelector(".main_container-garage_update_input-color");if(""===t.value)t.classList.add("error"),setTimeout((()=>{t.classList.remove("error")}),1e3);else{const e={color:n.value,name:t.value},r=yield((t,n)=>s(void 0,void 0,void 0,(function*(){const e={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};return yield fetch(`${a}/${t}`,e).then((t=>{if(t.ok)return t.json();throw new Error(`HTTP error! status: ${t.status}`)})).catch((()=>{console.log("car not found")}))})))(u.selectedCarId,e);w(!1),u.inputUpdate="",t.value="",r&&(yield T())}})),p=(t,n,a)=>`\n    <div id="${t}" class="main_container-garage_track_car-container"> \n      <div class="main_container-garage_track_car-container_buttons-container">\n        <button data-idcar="${t}" id="select" class="main_container-garage_track_car-container_buttons-container_select">SELECT</button>\n        <button data-idcar="${t}" id="remove" class="main_container-garage_track_car-container_buttons-container_remove">REMOVE</button>\n        <button data-idcar="${t}" id="start" class="main_container-garage_track_car-container_buttons-container_engine-start">START</button>\n        <button data-idcar="${t}" id="stop" class="main_container-garage_track_car-container_buttons-container_engine-stop">STOP</button>\n        <div class="main_container-garage_track_car-container_buttons-container_car-name">${n}</div>\n      </div>\n      <div data-idcar="${t}" id="road-${t}" class="main_container-garage_track_car-container_road">\n          <svg  data-idcar="${t}" id="svg-${t}" width="40px" height="30px" viewBox="0 0 1280.000000 596.000000">\n            <g transform="translate(0.000000,596.000000) scale(0.100000,-0.100000)"\n            fill="${a}" stroke="none">\n            <path d="M5022 5925 c-387 -79 -745 -104 -1052 -75 -132 12 -134 12 -260 5\n            -90 -6 -123 -13 -230 -52 -250 -91 -554 -244 -604 -304 -12 -14 -27 -24 -34\n            -21 -17 5 -112 -57 -112 -74 0 -8 -6 -11 -15 -8 -33 13 -353 -220 -565 -411\n            -199 -178 -476 -491 -467 -526 3 -11 2 -17 -2 -15 -18 12 -61 -54 -61 -94 0\n            -12 -7 -20 -17 -20 -12 0 -185 -236 -523 -711 -278 -391 -511 -723 -519 -736\n            -9 -19 -10 -32 -3 -48 9 -20 8 -24 -15 -30 -14 -3 -58 -1 -97 6 -81 14 -107\n            10 -156 -23 -48 -33 -70 -68 -86 -134 -14 -61 -19 -180 -8 -208 4 -11 19 -16\n            44 -16 36 0 38 -2 45 -37 3 -20 20 -49 36 -65 16 -16 29 -30 29 -31 0 -1 -33\n            -2 -73 -2 -85 -1 -157 -29 -226 -91 -38 -35 -44 -46 -48 -89 -5 -59 21 -109\n            65 -126 32 -13 179 3 257 28 l51 15 54 -34 c182 -117 485 -227 800 -292 128\n            -26 124 -22 89 -103 -25 -60 -56 -179 -69 -268 -51 -360 84 -737 356 -995 537\n            -511 1404 -392 1791 246 108 178 153 335 160 559 5 155 -5 245 -43 383 l-6 23\n            180 -2 c99 0 185 2 191 6 9 5 5028 -382 5058 -390 8 -3 2 -32 -18 -94 -37\n            -115 -44 -163 -30 -190 9 -17 8 -34 -5 -81 -24 -87 -16 -169 22 -216 67 -82\n            219 -143 326 -130 64 8 128 42 144 76 7 14 26 97 43 185 16 88 37 184 46 213\n            l16 52 117 -1 c64 -1 150 -4 191 -8 l73 -6 18 -70 c158 -618 763 -1001 1371\n            -866 457 102 811 480 894 958 8 47 15 110 15 139 l0 54 104 0 104 0 22 -45\n            c39 -82 151 -121 230 -80 39 20 120 117 120 144 0 12 10 35 21 51 20 26 23 47\n            30 227 12 287 10 502 -4 543 -22 63 -86 50 -124 -25 l-16 -30 -17 85 c-33 159\n            -86 281 -174 402 l-55 75 34 69 c72 140 71 308 -1 416 -33 51 -171 118 -241\n            118 -95 -1 -205 -28 -286 -69 l-78 -41 -87 71 c-454 368 -1206 530 -2757 594\n            -82 4 -155 8 -162 10 -8 3 -7 16 5 47 28 79 -2 152 -88 214 -43 31 -50 41 -50\n            70 0 30 -7 38 -60 74 -99 67 -177 136 -363 319 -118 118 -198 206 -239 265\n            l-61 89 101 96 c100 96 124 128 136 188 17 77 -41 175 -127 218 -52 25 -68 27\n            -312 40 l-257 14 -117 113 c-213 208 -256 227 -591 263 -440 46 -1007 134\n            -1420 221 -90 19 -171 34 -180 33 -8 -1 -88 -16 -178 -34z m2730 -752 c39 -42\n            68 -95 68 -124 0 -29 -26 -58 -38 -43 -5 5 -43 47 -87 94 l-79 85 88 -87 c49\n            -48 92 -85 97 -82 26 16 -3 96 -54 152 -19 20 -30 23 -84 21 -35 -1 -66 1 -70\n            4 -3 4 25 7 63 7 64 0 73 -3 96 -27z m206 -10 c36 -26 72 -81 72 -107 -1 -12\n            -31 -53 -71 -95 -76 -80 -78 -81 -121 -17 -16 24 -13 22 14 -8 l34 -38 67 68\n            c39 40 67 78 67 90 0 32 -41 87 -80 106 -31 16 -110 25 -110 13 0 -2 11 -21\n            25 -41 14 -20 25 -42 25 -48 0 -6 -11 7 -25 29 -13 22 -29 48 -35 59 -11 18\n            -9 18 49 14 40 -3 71 -11 89 -25z m-68 -117 c0 -14 -12 -38 -26 -53 l-26 -28\n            21 29 c12 16 21 39 21 52 0 13 2 24 5 24 3 0 5 -11 5 -24z m-875 -521 c413\n            -14 758 -25 767 -25 9 0 45 -46 84 -107 l69 -108 -25 -50 c-23 -47 -25 -60\n            -25 -205 0 -128 3 -161 17 -186 22 -41 89 -73 156 -76 29 -2 52 -6 52 -9 0\n            -15 -72 -68 -102 -77 -23 -6 -315 11 -931 53 -864 60 -899 63 -944 86 -90 47\n            -88 35 -91 410 l-3 329 113 -5 c62 -3 451 -17 863 -30z m1508 -484 c47 -34 47\n            -35 47 -93 0 -32 -3 -58 -7 -58 -8 0 -164 231 -172 254 -2 6 16 -7 40 -29 24\n            -22 65 -56 92 -74z"/>\n            </g>\n            </svg>\n          <img src="${e(659)}" alt="finish" class="main_container-garage_track_car-container_road_finish-img">\n      </div>\n    </div>\n  `,f=()=>h(void 0,void 0,void 0,(function*(){const t=document.querySelector(".main_container-garage_winners-count");for(let t=0;t<10;t++){const t={color:b(),name:`${y(i)} ${y(o)} `};(yield l(t))&&(u.allCarsCount=u.allCarsCount+1)}t.textContent=`Garage(${u.allCarsCount})`,T()}));function y(t){return t[Math.floor(Math.random()*t.length)]}function b(){let t="#";for(let n=0;n<6;n++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}function w(t){const n=document.querySelectorAll("button"),e=document.querySelector(".main_container-garage_create_input-text"),a=document.querySelector(".main_container-garage_update_input-text");e.disabled=!!t,a.disabled=!t,e.value=u.inputCreate,a.value=u.inputUpdate,u.selectButtonIsActive=t;for(let e=0;e<n.length;e++)"update"===n[e].id?n[e].disabled=!t:"stop"!==n[e].id&&(n[e].disabled=!!t)}function S(t,n,e){n&&(n.disabled=!t),e&&(e.disabled=!!t)}var E=function(t,n,e,a){return new(e||(e=Promise))((function(r,i){function o(t){try{c(a.next(t))}catch(t){i(t)}}function s(t){try{c(a.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(o,s)}c((a=a.apply(t,n||[])).next())}))};class C{constructor(t){this.animationId=0,this.xPos=0,this.time=0,this.startStopCar=(t,n)=>E(this,void 0,void 0,(function*(){return yield fetch(`${r}?id=${n}&status=${t}`,{method:"PATCH"}).then((t=>E(this,void 0,void 0,(function*(){if(t.ok||"application/json"!==t.headers.get("Content-Type"))return yield t.json();throw new Error(`HTTP error! status: ${t.status}`)})))).catch((()=>{console.log("car not found")}))})),this.id=t,this.xPos=0,this.time=0,this.startButton=null,this.stopButton=null,this.car=null,this.track=null}init(){this.startButton=document.querySelector(`#start[data-idcar="${this.id}"]`),this.stopButton=document.querySelector(`#stop[data-idcar="${this.id}"]`),this.car=document.querySelector(`#svg-${this.id}[data-idcar="${this.id}"]`),this.track=document.querySelector(`#road-${this.id}[data-idcar="${this.id}"]`),this.startButton.addEventListener("click",(()=>E(this,void 0,void 0,(function*(){this.clickStartButton()})))),this.stopButton.addEventListener("click",(()=>E(this,void 0,void 0,(function*(){this.clickStopButton()})))),this.disableStopButton()}clickStopButton(){return E(this,void 0,void 0,(function*(){this.stopButton instanceof HTMLButtonElement&&this.startButton instanceof HTMLButtonElement&&S(!1,this.stopButton,this.startButton),this.stopDrive(),yield this.startStopCar("stopped",this.id),this.backToStart()}))}clickStartButton(){return E(this,void 0,void 0,(function*(){this.stopButton instanceof HTMLButtonElement&&this.startButton instanceof HTMLButtonElement&&S(!0,this.stopButton,this.startButton);const t=yield this.startStopCar("started",this.id),n=Math.round(t.distance/t.velocity/1e3*1e4)/1e4;this.time=n,console.log(this.time),this.updatePosition(),this.startDrive()}))}startDrive(){fetch(`${r}?id=${this.id}&status=drive`,{method:"PATCH"}).then((t=>E(this,void 0,void 0,(function*(){if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);yield this.startStopCar("stopped",this.id)})))).catch((()=>E(this,void 0,void 0,(function*(){console.log("car not found"),cancelAnimationFrame(this.animationId),yield this.startStopCar("stopped",this.id)}))))}stopDrive(){cancelAnimationFrame(this.animationId)}disableStopButton(){this.stopButton instanceof HTMLButtonElement&&(console.log(this.stopButton.disabled),this.stopButton.disabled=!0)}updatePosition(){this.track&&this.car&&(this.xPos+=(this.track.offsetWidth-this.car.clientWidth)/this.time/59),this.car&&(this.car.style.transform=`translateX(${this.xPos}px)`),this.track&&this.car&&this.xPos>=this.track.offsetWidth-this.car.clientWidth?cancelAnimationFrame(this.animationId):this.animationId=requestAnimationFrame(this.updatePosition.bind(this))}backToStart(){this.xPos=0,this.car&&(this.car.style.transform=`translateX(${this.xPos}px)`)}}const T=()=>{return t=void 0,n=void 0,a=function*(){const t=document.querySelector(".main_container-garage_winners-count"),n=document.querySelector(".main_container-garage_winners-page-number"),e=document.querySelector(".main_container-garage_race-button"),a=yield c(u.carsPage,u.limitCars),r=a.headers,i=r?r.get("X-Total-Count"):null;e.disabled=!1,u.allCarsCount=null===i?0:+i,t&&n&&(t.innerHTML=`Garage(${i})`,n.innerHTML=`Page#${u.carsPage}`);let o="";for(const t of a.data)o+=p(t.id,t.name,t.color);const s=document.querySelector(".main_container-garage_track");s&&(s.innerHTML=o);for(const t of a.data)$(t.id),g[t.id].init()},new((e=void 0)||(e=Promise))((function(r,i){function o(t){try{c(a.next(t))}catch(t){i(t)}}function s(t){try{c(a.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(o,s)}c((a=a.apply(t,n||[])).next())}));var t,n,e,a},$=t=>{g[t]||(g[t]=new C(t))};var P=function(t,n,e,a){return new(e||(e=Promise))((function(r,i){function o(t){try{c(a.next(t))}catch(t){i(t)}}function s(t){try{c(a.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(o,s)}c((a=a.apply(t,n||[])).next())}))};(new class{render(e){return r=this,i=void 0,d=function*(){const r=document.querySelector(".body"),i=t.find((t=>{const n=new RegExp(t.path);return e.match(n)}));r&&i?(r.innerHTML=i.data,this.initAnchors(),e.match(new RegExp(t[0].path))?console.log("main page"):e.match(new RegExp(t[1].path))?(yield T(),(()=>{var t,e,r,i,o,d,l;const _=document.querySelector(".main_container-garage_create_input-text"),p=document.querySelector(".main_container-garage_update_input-text"),y=document.getElementById("cars_per_page"),b=document.querySelector(".main_container-garage_race-button");y.placeholder=`${u.limitCars}`,null===(t=document.querySelector(".main_container-garage_create_button-create"))||void 0===t||t.addEventListener("click",m),null===(e=document.querySelector(".main_container-garage_update_button-update"))||void 0===e||e.addEventListener("click",v),null===(r=document.querySelector(".main_container-garage_generate-button"))||void 0===r||r.addEventListener("click",f),null===(i=document.querySelector(".main_container-garage_track"))||void 0===i||i.addEventListener("click",(t=>{var e;t.target instanceof HTMLButtonElement&&"remove"===t.target.id&&t.target.dataset.idcar&&(e=+t.target.dataset.idcar,h(void 0,void 0,void 0,(function*(){yield(t=>s(void 0,void 0,void 0,(function*(){return yield fetch(`${a}/${t}`,{method:"DELETE"}).then((t=>{if(t.ok)return t.json();throw new Error(`HTTP error! status: ${t.status}`)})).catch((t=>{console.log(t)}))})))(e),yield(t=>s(void 0,void 0,void 0,(function*(){return yield fetch(`${n}/${t}`,{method:"DELETE"}).then((t=>{if(t.ok)return t.json();throw new Error(`HTTP error! status: ${t.status}`)})).catch((()=>{console.log("car is not in winner list")}))})))(e),1===document.querySelectorAll(".main_container-garage_track_car-container").length&&(u.carsPage=1===u.carsPage?1:u.carsPage-1),T()}))),t.target instanceof HTMLButtonElement&&"select"===t.target.id&&t.target.dataset.idcar&&(u.selectButtonIsActive=!0,u.selectedCarId=+t.target.dataset.idcar,w(!0))})),null===(o=document.querySelector(".main_container-garage_nav-pagination_next"))||void 0===o||o.addEventListener("click",(()=>{u.allCarsCount&&u.carsPage<Math.ceil(+u.allCarsCount/u.limitCars)&&(u.carsPage=u.carsPage+1,T())})),null===(d=document.querySelector(".main_container-garage_nav-pagination_prev"))||void 0===d||d.addEventListener("click",(()=>{u.carsPage>1&&(u.carsPage=u.carsPage-1,T())}));const S=document.querySelector(".main_container-garage_input_winners-per-page");S instanceof HTMLInputElement&&(S.addEventListener("keypress",(function(t){/[0-9]/.test(t.key)||t.preventDefault()})),S.addEventListener("input",(()=>{+S.value>10&&(S.value="10"),u.limitCars!==+S.value&&(u.limitCars=+S.value,u.carsPage=1,T())}))),w(u.selectButtonIsActive),_.addEventListener("change",(()=>{u.inputCreate=_.value})),_.value=u.inputCreate,p.addEventListener("change",(()=>{u.inputUpdate=p.value})),p.value=u.inputUpdate,b.addEventListener("click",(()=>P(void 0,void 0,void 0,(function*(){b.disabled=!0,document.querySelector(".main_container-garage_race-button");const t=yield c(u.carsPage,u.limitCars);for(const n of t.data)g[n.id]&&g[n.id].clickStartButton()})))),null===(l=document.querySelector(".main_container-garage_reset-button"))||void 0===l||l.addEventListener("click",(()=>P(void 0,void 0,void 0,(function*(){b.disabled=!1;const t=yield c(u.carsPage,u.limitCars);for(const n of t.data)g[n.id]&&g[n.id].clickStopButton()}))))})()):e.match(new RegExp(t[2].path))&&((()=>{var t,n;window.addEventListener("click",(t=>{var n,e;t.target instanceof HTMLElement&&"true"===t.target.dataset.wins&&(u.orderWinners="ASC"===u.orderWinners?"DESC":"ASC",u.sortWinners="wins",null===(n=document.querySelector('[data-time="true"]'))||void 0===n||n.classList.remove("sorted-ASC","sorted-DESC"),t.target.classList.remove("sorted-ASC","sorted-DESC"),t.target.classList.add(`sorted-${u.orderWinners}`),_()),t.target instanceof HTMLElement&&"true"===t.target.dataset.time&&(u.orderWinners="ASC"===u.orderWinners?"DESC":"ASC",u.sortWinners="time",null===(e=document.querySelector('[data-wins="true"]'))||void 0===e||e.classList.remove("sorted-ASC","sorted-DESC"),t.target.classList.remove("sorted-ASC","sorted-DESC"),t.target.classList.add(`sorted-${u.orderWinners}`),_())})),null===(t=document.querySelector(".main_container-garage_nav-pagination_next"))||void 0===t||t.addEventListener("click",(()=>{u.allWinnersCount&&u.winnersPage<Math.ceil(+u.allWinnersCount/u.limitWinners)&&(u.winnersPage=u.winnersPage+1,_())})),null===(n=document.querySelector(".main_container-garage_nav-pagination_prev"))||void 0===n||n.addEventListener("click",(()=>{u.winnersPage>1&&(u.winnersPage=u.winnersPage-1,_())}));const e=document.querySelector(".main_container-garage_input_winners-per-page");e instanceof HTMLInputElement&&(+e.value>10&&(e.value="10"),e.addEventListener("input",(()=>{u.limitWinners!==+e.value&&(u.limitWinners=+e.value,u.winnersPage=1,_())})))})(),_())):r&&(r.innerHTML="Page not found")},new((o=void 0)||(o=Promise))((function(t,n){function e(t){try{s(d.next(t))}catch(t){n(t)}}function a(t){try{s(d.throw(t))}catch(t){n(t)}}function s(n){var r;n.done?t(n.value):(r=n.value,r instanceof o?r:new o((function(t){t(r)}))).then(e,a)}s((d=d.apply(r,i||[])).next())}));var r,i,o,d}goTo(t){window.history.pushState({url:t},t,t),this.render(t)}initAnchors(){document.querySelectorAll('[href^="/"]').forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault(),t.target instanceof HTMLAnchorElement&&this.goTo(t.target.pathname)}))}))}initRouter(){const t=localStorage.getItem("variables_data")||"";let n=null;if(t){n=JSON.parse(t)||null;for(const[t,e]of Object.entries(n))u[t]=e}window.addEventListener("beforeunload",(function(){const t=u;localStorage.setItem("variables_data",JSON.stringify(t))})),this.render(window.location.pathname),window.addEventListener("popstate",(()=>{this.render(window.location.pathname)}))}}).initRouter()}()}();